<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Clone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #128C7E;
      --primary-dark: #075E54;
      --secondary-color: #25D366;
      --background-light: #ECE5DD;
      --background-dark: #D1F4CC;
      --text-dark: #4A4A4A;
      --text-light: #FFFFFF;
      --message-in: #FFFFFF;
      --message-out: #DCF8C6;
      --time-color: #888888;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
    }

    body {
      background-color: #E5DDD5;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
      height: 100vh;
      overflow: hidden;
    }

    .app-container {
      display: flex;
      height: 100vh;
      max-width: 1600px;
      margin: 0 auto;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
    }

    /* Sidebar */
    .sidebar {
      width: 30%;
      min-width: 300px;
      max-width: 400px;
      background-color: #FFFFFF;
      border-right: 1px solid #E9E9E9;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    /* Header */
    .header {
      background-color: #F0F2F5;
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #E9E9E9;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #DFDFDF;
      overflow: hidden;
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .header-icons {
      display: flex;
      gap: 20px;
      color: #54656F;
    }

    .header-icons i {
      cursor: pointer;
      font-size: 20px;
    }

    /* Search */
    .search-container {
      padding: 8px 10px;
      background-color: #F0F2F5;
    }

    .search-box {
      background-color: #FFFFFF;
      border-radius: 8px;
      padding: 6px 10px;
      display: flex;
      align-items: center;
    }

    .search-box i {
      color: #54656F;
      margin-right: 10px;
    }

    .search-box input {
      border: none;
      outline: none;
      width: 100%;
      padding: 6px 0;
      font-size: 14px;
    }

    /* Chats list */
    .chats-list {
      flex: 1;
      overflow-y: auto;
    }

    .chat-item {
      display: flex;
      padding: 12px 16px;
      border-bottom: 1px solid #F2F2F2;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .chat-item:hover {
      background-color: #F5F5F5;
    }

    .chat-item.active {
      background-color: #EBEBEB;
    }

    .chat-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      margin-right: 12px;
      overflow: hidden;
    }

    .chat-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .chat-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .chat-info-top {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .chat-name {
      font-weight: 500;
      color: #111B21;
    }

    .chat-time {
      font-size: 12px;
      color: #667781;
    }

    .chat-info-bottom {
      display: flex;
      justify-content: space-between;
    }

    .chat-last-message {
      font-size: 14px;
      color: #667781;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 180px;
    }

    .chat-unread {
      background-color: #25D366;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* Chat area */
    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: #E5DDD5;
      position: relative;
    }

    /* Chat header */
    .chat-header {
      background-color: #F0F2F5;
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #E9E9E9;
    }

    .chat-header-info {
      display: flex;
      align-items: center;
    }

    .chat-header-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 12px;
      overflow: hidden;
    }

    .chat-header-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .chat-header-name {
      font-weight: 500;
      color: #111B21;
    }

    .chat-header-status {
      font-size: 13px;
      color: #667781;
    }

    .chat-header-icons {
      display: flex;
      gap: 20px;
      color: #54656F;
    }

    .chat-header-icons i {
      cursor: pointer;
      font-size: 20px;
    }

    /* Messages */
    .messages-container {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
    }

    .message {
      max-width: 65%;
      margin-bottom: 15px;
      padding: 8px 12px;
      border-radius: 7.5px;
      font-size: 15px;
      line-height: 1.4;
      position: relative;
      word-wrap: break-word;
    }

    .message-in {
      background-color: var(--message-in);
      margin-right: auto;
      border-top-left-radius: 0;
    }

    .message-out {
      background-color: var(--message-out);
      margin-left: auto;
      border-top-right-radius: 0;
    }

    .message-time {
      font-size: 11px;
      color: var(--time-color);
      text-align: right;
      margin-top: 4px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }

    .message-time i {
      margin-left: 4px;
      font-size: 10px;
    }

    .message-status {
      color: #4FC3F7;
    }

    /* Input area */
    .input-area {
      background-color: #F0F2F5;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      border-top: 1px solid #E9E9E9;
    }

    .input-icons {
      display: flex;
      gap: 15px;
      color: #54656F;
      margin-right: 15px;
    }

    .input-icons i {
      cursor: pointer;
      font-size: 24px;
    }

    .message-input {
      flex: 1;
      background-color: #FFFFFF;
      border-radius: 8px;
      padding: 10px 15px;
      border: none;
      outline: none;
      font-size: 15px;
      resize: none;
      max-height: 100px;
      overflow-y: auto;
    }

    .send-button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 15px;
      cursor: pointer;
    }

    .send-button i {
      font-size: 20px;
    }

    /* Auth screen */
    .auth-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: var(--primary-dark);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .auth-logo {
      font-size: 60px;
      margin-bottom: 30px;
    }

    .auth-title {
      font-size: 28px;
      margin-bottom: 20px;
    }

    .auth-description {
      font-size: 16px;
      margin-bottom: 30px;
      max-width: 500px;
      line-height: 1.5;
    }

    .auth-input {
      width: 100%;
      max-width: 400px;
      padding: 15px;
      border-radius: 8px;
      border: none;
      margin-bottom: 20px;
      font-size: 16px;
    }

    .auth-button {
      background-color: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .auth-button:hover {
      background-color: #1EBE71;
    }

    .auth-message {
      margin-top: 20px;
      color: #A5D6A7;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        max-width: 100%;
      }
      
      .chat-area {
        display: none;
      }
      
      .chat-area.active {
        display: flex;
      }
    }
  </style>
</head>
<body>
  <!-- Auth Screen (shown initially) -->
  <div class="auth-container" id="auth-container">
    <div class="auth-logo">
      <i class="fab fa-whatsapp"></i>
    </div>
    <h1 class="auth-title">WhatsApp Web</h1>
    <p class="auth-description">
      Send and receive messages without keeping your phone online.
      Use WhatsApp on up to 4 linked devices and 1 phone at the same time.
    </p>
    <input type="text" class="auth-input" id="phone-input" placeholder="Enter your phone number">
    <button class="auth-button" id="auth-button">Send Verification Code</button>
    <p class="auth-message" id="auth-message"></p>
  </div>

  <!-- Main App (hidden initially) -->
  <div class="app-container" id="app-container" style="display: none;">
    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Header -->
      <div class="header">
        <div class="user-avatar">
          <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User">
        </div>
        <div class="header-icons">
          <i class="fas fa-users"></i>
          <i class="fas fa-comment-dots"></i>
          <i class="fas fa-ellipsis-v"></i>
        </div>
      </div>

      <!-- Search -->
      <div class="search-container">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search or start new chat">
        </div>
      </div>

      <!-- Chats List -->
      <div class="chats-list">
        <!-- Chat items will be added here dynamically -->
      </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-area">
      <!-- Chat Header -->
      <div class="chat-header">
        <div class="chat-header-info">
          <div class="chat-header-avatar">
            <img src="https://randomuser.me/api/portraits/women/2.jpg" alt="Contact">
          </div>
          <div>
            <div class="chat-header-name">Jane Smith</div>
            <div class="chat-header-status">online</div>
          </div>
        </div>
        <div class="chat-header-icons">
          <i class="fas fa-search"></i>
          <i class="fas fa-paperclip"></i>
          <i class="fas fa-ellipsis-v"></i>
        </div>
      </div>

      <!-- Messages -->
      <div class="messages-container" id="messages-container">
        <!-- Messages will be added here dynamically -->
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div class="input-icons">
          <i class="far fa-smile"></i>
          <i class="fas fa-paperclip"></i>
        </div>
        <textarea class="message-input" id="message-input" placeholder="Type a message" rows="1"></textarea>
        <button class="send-button" id="send-button">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Supabase Integration -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Supabase configuration
    const SUPABASE_URL = 'https://fflawatbcocazbsblzkl.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZmbGF3YXRiY29jYXpic2JsemtsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1OTQzMDcsImV4cCI6MjA3MDE3MDMwN30.4bCY4AcHHsWsXJCvcVhoVXABdn7UV3S7pxIuX4jMoww';

    // Initialize Supabase
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // DOM elements
    const authContainer = document.getElementById('auth-container');
    const appContainer = document.getElementById('app-container');
    const phoneInput = document.getElementById('phone-input');
    const authButton = document.getElementById('auth-button');
    const authMessage = document.getElementById('auth-message');
    const messagesContainer = document.getElementById('messages-container');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');
    const chatsList = document.querySelector('.chats-list');

    // Sample data for demo
    const sampleContacts = [
      { id: 1, name: 'John Doe', avatar: 'https://randomuser.me/api/portraits/men/2.jpg', lastMessage: 'Hey, how are you?', time: '10:30 AM', unread: 2 },
      { id: 2, name: 'Jane Smith', avatar: 'https://randomuser.me/api/portraits/women/2.jpg', lastMessage: 'Meeting at 3pm', time: '9:15 AM', unread: 0 },
      { id: 3, name: 'Mike Johnson', avatar: 'https://randomuser.me/api/portraits/men/3.jpg', lastMessage: 'Please send the files', time: 'Yesterday', unread: 5 },
      { id: 4, name: 'Sarah Williams', avatar: 'https://randomuser.me/api/portraits/women/3.jpg', lastMessage: 'Thanks for your help!', time: 'Yesterday', unread: 0 },
      { id: 5, name: 'David Brown', avatar: 'https://randomuser.me/api/portraits/men/4.jpg', lastMessage: 'Let me check and get back', time: '7/20/23', unread: 0 }
    ];

    const sampleMessages = [
      { id: 1, text: 'Hey there!', time: '10:00 AM', outgoing: false },
      { id: 2, text: 'Hi! How are you?', time: '10:02 AM', outgoing: true },
      { id: 3, text: 'I\'m good, thanks! Just wanted to check if we\'re still meeting tomorrow?', time: '10:05 AM', outgoing: false },
      { id: 4, text: 'Yes, definitely. 3pm at the coffee shop works for me.', time: '10:10 AM', outgoing: true },
      { id: 5, text: 'Perfect! See you then.', time: '10:12 AM', outgoing: false },
      { id: 6, text: 'By the way, don\'t forget to bring the project files.', time: '10:13 AM', outgoing: true }
    ];

    // Initialize the app
    function initApp() {
      // Load sample contacts
      loadContacts();
      
      // Load sample messages for the first contact
      loadMessages(sampleMessages);
      
      // Set up event listeners
      setupEventListeners();
    }

    // Load contacts into the sidebar
    function loadContacts() {
      chatsList.innerHTML = '';
      
      sampleContacts.forEach(contact => {
        const chatItem = document.createElement('div');
        chatItem.className = 'chat-item';
        chatItem.innerHTML = `
          <div class="chat-avatar">
            <img src="${contact.avatar}" alt="${contact.name}">
          </div>
          <div class="chat-info">
            <div class="chat-info-top">
              <div class="chat-name">${contact.name}</div>
              <div class="chat-time">${contact.time}</div>
            </div>
            <div class="chat-info-bottom">
              <div class="chat-last-message">${contact.lastMessage}</div>
              ${contact.unread > 0 ? `<div class="chat-unread">${contact.unread}</div>` : ''}
            </div>
          </div>
        `;
        
        chatItem.addEventListener('click', () => {
          // In a real app, this would load messages for the selected contact
          document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
          chatItem.classList.add('active');
        });
        
        chatsList.appendChild(chatItem);
      });
      
      // Activate the first contact by default
      if (chatsList.firstChild) {
        chatsList.firstChild.classList.add('active');
      }
    }

    // Load messages into the chat area
    function loadMessages(messages) {
      messagesContainer.innerHTML = '';
      
      messages.forEach(message => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${message.outgoing ? 'message-out' : 'message-in'}`;
        messageDiv.innerHTML = `
          <div>${message.text}</div>
          <div class="message-time">
            ${message.time}
            ${message.outgoing ? '<i class="fas fa-check message-status"></i>' : ''}
          </div>
        `;
        messagesContainer.appendChild(messageDiv);
      });
      
      // Scroll to bottom
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Set up event listeners
    function setupEventListeners() {
      // Send message on button click
      sendButton.addEventListener('click', sendMessage);
      
      // Send message on Enter key (but allow Shift+Enter for new lines)
      messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
      
      // Auto-resize textarea as user types
      messageInput.addEventListener('input', () => {
        messageInput.style.height = 'auto';
        messageInput.style.height = (messageInput.scrollHeight) + 'px';
      });
    }

    // Send a new message
    function sendMessage() {
      const text = messageInput.value.trim();
      if (!text) return;
      
      // Create a new message object
      const newMessage = {
        id: Date.now(),
        text: text,
        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
        outgoing: true
      };
      
      // Add to messages and clear input
      loadMessages([...sampleMessages, newMessage]);
      messageInput.value = '';
      messageInput.style.height = 'auto';
      
      // In a real app, this would send the message to the server
      setTimeout(() => {
        const replyMessage = {
          id: Date.now() + 1,
          text: 'Thanks for your message! This is an automated reply.',
          time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
          outgoing: false
        };
        loadMessages([...sampleMessages, newMessage, replyMessage]);
      }, 1000);
    }

    // Authentication flow
    authButton.addEventListener('click', async () => {
      const phone = phoneInput.value.trim();
      
      if (!phone) {
        authMessage.textContent = 'Please enter a phone number';
        return;
      }
      
      // In a real app, this would send a verification code to the phone
      // For demo purposes, we'll just simulate a successful login
      authMessage.textContent = 'Sending verification code...';
      
      setTimeout(() => {
        authContainer.style.display = 'none';
        appContainer.style.display = 'flex';
        initApp();
      }, 1500);
    });

    // Allow pressing Enter in phone input to submit
    phoneInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        authButton.click();
      }
    });
  </script>
</body>
</html>
